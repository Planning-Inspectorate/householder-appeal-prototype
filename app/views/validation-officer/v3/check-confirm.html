{% extends "layouts/validation-officer/v3.html" %}

{% block pageTitle %}
  Check and confirm outcome of appeal - Validation officer - {{ serviceName }}
{% endblock %}

{% block beforeContent %}
  {{ govukPhaseBanner({
    tag: {
      text: "Beta"
    },
    html: 'This is a new service â€“ your <a class="govuk-link" href="#">feedback</a> will help us to improve it.'
  }) }}
  {{ govukBackLink({
    text: "Back",
    href: "appeal-list"
  }) }}
{% endblock %}


{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">
        Check and confirm
      </h1>

      <form action="" method="post">

        <!-- loop through data from validationAppeals.json -->
        {% for item in data['validationAppeals'] %}
          <!-- match selected appeal by ref in data and show -->
          {% if item.ref == data["validation-"+version+"-currentappeal"] %}
            <dl class="govuk-summary-list">
              <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                  Outcome of review 
                </dt>
                <dd class="govuk-summary-list__value">
                  {{ data["validation-"+version+"-outcome"] }}
                </dd>
              </div>
              <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key ">
                  Appellant name
                </dt>
                <dd class="govuk-summary-list__value">
                  {{ item.appellantName }}
                </dd>
              </div>
              <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                  Appeal reference
                </dt>
                <dd class="govuk-summary-list__value">
                  APP/Q9999/D/21/{{ item.ref }}
                </dd>
              </div>
              <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                  Appeal site
                </dt>
                <dd class="govuk-summary-list__value">
                    {{ item.addressLine1 }}{% if item.addressLine2 %}<br>{% endif %}{{ item.addressLine2 }}{% if item.addressTown %}<br>{% endif %}{{ item.addressTown }}{% if item.addressCounty %}<br>{% endif %}{{ item.addressCounty }}{% if item.postcode %}<br>{% endif %}{{ item.postcode }}
                </dd>
              </div>
              {% if data["validation-"+version+"-outcome"] == "Valid" %}
                <div class="govuk-summary-list__row">
                  <dt class="govuk-summary-list__key">
                    Description of development
                  </dt>
                  <dd class="govuk-summary-list__value">
                    {{ data["validation-"+version+"-descriptionofdevelopment"] }}
                  </dd>
                </div>
              {% endif %}
              {% if data["validation-"+version+"-outcome"] == "Invalid" %}
                <div class="govuk-summary-list__row">
                  <dt class="govuk-summary-list__key">
                    Reasons
                  </dt>
                  <dd class="govuk-summary-list__value">
                    <ul class="govuk-list">
                      {% for reason in data["validation-"+version+"-invalid-reasons"] %}
                        <li>
                          {{ reason }}
                          {% if reason == "Other" %}
                            - {{ data["validation-"+version+"-invalid-other"] }}
                          {% endif %}
                        </li>
                      {% endfor %}
                    </ul>
                  </dd>
                </div>
              {% endif %}
            </dl>
          {% endif %}
        {% endfor %}
        
        <div class="govuk-warning-text">
          <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
          <strong class="govuk-warning-text__text">
            <span class="govuk-warning-text__assistive">Warning</span>
            {% if data["validation-"+version+"-outcome"] == "Valid" %}
              Confirming this appeal as valid starts the appeal and sends the LPA questionnaire email.
            {% endif %}
            {% if data["validation-"+version+"-outcome"] == "Invalid" %}
              Confirming this appeal as invalid turns away the appeal and emails the appellant and LPA.
            {% endif %}
          </strong>
        </div>
          
        <div class="govuk-button-group">
          <button class="govuk-button" data-module="govuk-button">
            {% if data["validation-"+version+"-outcome"] == "Valid" %}
              Confirm and start appeal
            {% endif %}
            {% if data["validation-"+version+"-outcome"] == "Invalid" %}
              Confirm and turn away appeal
            {% endif %}
          </button>
          <a class="govuk-link" href="appeal-review">Change outcome</a>
        </div>

      </form>
      
    </div>
  </div>

{% endblock %}
